window.__require=function t(n,e,i){function o(r,c){if(!e[r]){if(!n[r]){var s=r.split("/");if(s=s[s.length-1],!n[s]){var h="function"==typeof __require&&__require;if(!c&&h)return h(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}}var l=e[r]={exports:{}};n[r][0].call(l.exports,function(t){return o(n[r][1][t]||t)},l,l.exports,t,n,e,i)}return e[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<i.length;r++)o(i[r]);return o}({BackBullet:[function(t,n,e){"use strict";cc._RF.push(n,"3336aZJOv5O072qSARUEO1G","BackBullet"),cc.Class({extends:cc.Component,properties:{},update:function(t){if(this.node.isBacking){var n=cc.v2(hjm._player).sub(this.node);if(this.node.y<=-500)return this.node.isBacking=!1,this.node.del(),void hjm._main.getComponent("NewGameMain").endRun();var e=this.getUnit(n);this.rigidbody.applyForceToCenter(e.mul(5e3))}else if(this.node.isShooting){var i=this.rigidbody.linearVelocity,o=Math.sqrt(i.x*i.x+i.y*i.y);if(o<=120&&(this.node.del(),this.node.isShooting=!1,hjm._main.getComponent("NewGameMain").endRun()),this.rigidbody.linearDamping<0&&o>=this.node.data.power_limit){var a=this.node.data.power_limit;this.rigidbody.linearVelocity=cc.v2(i.x*a/o,i.y*a/o),this.rigidbody.linearDamping=0}}},onEndContact:function(t,n,e){this.node.contactFun(n,e)},onLoad:function(){var t=this;this.rigidbody=this.node.getComponent(cc.RigidBody),this.atk=1,this.node.skill=function(){return t.skill()}},onBeginContact:function(t,n,e){if(this.node.isBacking)return"en"===e.node.group&&(t.disabled=!0),void("wall"===e.node.group&&(t.disabled=!0));this.node.isShooting},getUnit:function(t){var n=Math.sqrt(t.x*t.x+t.y*t.y);return cc.v2(t.x/n,t.y/n)},onCollisionEnter:function(t,n){var e=this;if(this.node.isShooting&&"_player"===t.node.name){var i=this.rigidbody.linearVelocity,o=cc.v2(hjm._player).sub(this.node);i=this.getUnit(i),o=this.getUnit(o),cc.log(i.x*o.x+i.y*o.y,i.x,i.y,o.x,o.y),i.x*o.x+i.y*o.y>=.5&&(this.node.isShooting=!1,this.rigidbody.linearVelocity=cc.v2(0),tz(this.node).to(.2,cc.v2(hjm._player))(function(){e.node.del(),hjm._main.getComponent("NewGameMain").endRun()})())}},skill:function(){this.node.isBacking=!0,this.node.isShooting=!1}}),cc._RF.pop()},{}],DylAd:[function(t,n,e){"use strict";cc._RF.push(n,"f8c18Hs2QVNoY2ruupVy940","DylAd"),cc.Class({extends:cc.Component,properties:{isDebug:!1},onLoad:function(){var t=this.isDebug,n=!1,e=null,i=null;t?setTimeout(function(){n=!0},1e4):(e=anysdk.agentManager,(i=e.getAdsPlugin()).callFuncWithParam("preloadAd")),dyl.__adFun=function(){},dyl.__isLoading=!1;dyl.addAd=function(e){e&&(dyl.__adFun=e);var o=null;if(t)o=n;else{var a=anysdk.PluginParam.create("gq4XnooZ4zAyQJPiva3");o=i.callBoolFuncWithParam("couldShowAd",a)}return o?(function(){if(t)cc.log("\u5047\u5e7f\u544a\u51fa\u6765\u4e86\uff0c\u54c8\u54c8\u54c8\u54c8\u54c8");else{var n=anysdk.PluginParam.create("gq4XnooZ4zAyQJPiva3");i.callFuncWithParam("showAd",n)}}(),dyl.__adFun(),!0):!dyl.__isLoading&&(dyl.__isLoading=!0,cc.loader.loadRes("dylLoadingAd",function(t,n){var e=cc.instantiate(n);cc.director.getScene().getChildren()[0].addChild(e)}),!1)}}}),cc._RF.pop()},{}],DylBar:[function(t,n,e){"use strict";cc._RF.push(n,"627c13XFIpEA5JjMypfts2c","DylBar"),cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2665 \u8840\u6761",executeInEditMode:!0},properties:{_isNew:!0,_maxHp:1,_hp:1,_barMaxLen:0,progress:{default:1,min:0,max:1,slide:!0,notify:function(t){return this.resetProgress(t)}}},__preload:function(){var t=this;if(cc.bar=this,this.delActFun=function(){return null},this.checkIsNew(),this._bar=this.node.getChildByName("bar"),this.node.set=function(n){return t.setFun(n)},this.node.change=function(n,e){return t.changeFun(n,e)},0===this._barMaxLen){var n=this.getSize(this._bar).x;if(n<1)return cc.warn("\u8840\u6761\u603b\u957f\u5ea6\u4e3a0",n);this._barMaxLen=n/this.progress}},getSize:function(t){var n=(t=t.node?t.node:t).getContentSize(),e=n.width,i=n.height;return cc.v2(e,i)},resetProgress:function(t){t>0&&(this._barMaxLen=this.getSize(this._bar).x/t),this._bar.width=this._barMaxLen*this.progress},resetSpr:function(){this.node.getComponent(cc.Sprite).spriteFrame=this.backSpr,this._bar.getComponent(cc.Sprite).spriteFrame=this.barSpr;var t=this.getSize(this.node);this._maxX=t.x*this.scaleX,this._maxY=t.y*this.scaleY,this._bar.height=this._maxY,this._bar.setAnchorPoint(0,.5),this._bar.setPosition(-.5*this._maxX,0),this.resetData()},resetData:function(){this._maxHp<=0?this._bar.width=0:this._bar.width=this._barMaxLen*this._hp/this._maxHp},checkIsNew:function(){},setFun:function(t){if("string"==typeof t||"number"==typeof t)return"string"==typeof t?(this._maxHp=Number(t),this._maxHp<0&&(this._maxHp=0),"0"===t[0]?this._hp=this._maxHp:this._hp>this._maxHp&&(this._hp=this._maxHp),this._hp):t>this._maxHp?(this._hp=this._maxHp,this._hp):t<0?(this._hp=0,this._hp):void(this._hp=t);cc.warn("label \u7684string \u7684data\u7c7b\u578b\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u6570\u5b57",t)},changeFun:function(t,n){var e=this;if(this.delActFun(),this._maxHp<=0)return cc.log("\u6700\u5927\u8840\u91cf\u90fd\u662f 0"),this._bar.width=0;n>this._maxHp&&(n=this._maxHp),n===t&&(this._bar.width=this._barMaxLen*this._hp/this._maxHp),this._bar.width=this._barMaxLen*n/this._maxHp;var i=300;i*=t>n?1:-1;var o=(t-n)*this._barMaxLen/(i*this._maxHp);this.delActFun=dyl.update(function(n){return e._bar.width=e._bar.width+i*n,!((o-=n)<=0&&(e._bar.width=e._barMaxLen*t/e._maxHp,1))})}}),cc._RF.pop()},{}],DylButton:[function(t,n,e){"use strict";cc._RF.push(n,"cd72cG+IilO6qAadQpr/XqC","DylButton");var i=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var e=[],i=!0,o=!1,a=void 0;try{for(var r,c=t[Symbol.iterator]();!(i=(r=c.next()).done)&&(e.push(r.value),!n||e.length!==n);i=!0);}catch(t){o=!0,a=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return e}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();cc.Enum({Null:0,NextScene:1,NextLevel:2,Restart:3,ExitGame:4,Popup:5,Popdown:6,Buy:7});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u264e \u6309\u94ae",executeInEditMode:!0,inspector:"packages://dyl-button/DylButton.js"},properties:{touchFun:{default:function(){return new cc.Component.EventHandler},type:cc.Component.EventHandler,displayName:"\u89e6\u53d1\u4e8b\u4ef6"},nodeName:"",jsName:"",funName:"",popupNode:cc.Node,popdownNode:cc.Node,sceneType:{default:"NextLevel",notify:function(){"Buy"===this.sceneType&&this.setBuy()}},nextScene:"",coin:{default:0,displayName:"\u4ef7\u683c"},coinName:{default:"coin",displayName:"\u8d27\u5e01\u5355\u4f4d"},toolName:{default:"",displayName:"\u7269\u54c1\u8def\u5f84\uff08.\u9694\u5f00\uff09"},hasSetBuy:!1,isAutoSave:{default:!1,displayName:"\u662f\u5426\u8981\u81ea\u52a8\u4fdd\u5b58"}},__preload:function(){this.myInit()},setBuy:function(){if(!this.hasSetBuy){this.hasSetBuy=!0;var t=new cc.Node("noMoney");this.node.addChild(t),t.addComponent(cc.Sprite),t.width=this.node.width,t.height=this.node.height,t=new cc.Node("coinNum"),this.node.addChild(t),t.addComponent(cc.Label),t.lineHeight=this.node.height,t.fontSize=.8*this.node.height,t=new cc.Node("hasBuy"),this.node.addChild(t),t.addComponent(cc.Sprite),t.width=this.node.width,t.height=this.node.height}},getTopNode:function(){return cc.director.getScene().getChildren()[0]},getSceneArr:function(){return["aa","bb"]},myInit:function(){var t=null;this.node.getChildByName("topSpr")&&((t=this.node.getChildByName("topSpr")).active=!1);var n=this,e=null;this.node.on("touchstart",function(i){"Buy"!==n.sceneType&&(t?t.active=!0:(e=n.node.getScale(),n.node.color,n.node.setScale(.92*e)))}),this.node.on("touchend",function(i){if("Buy"!==n.sceneType){if(t)return t.active=!1,void n.onClick();n.node.setScale(e),n.onClick()}else n.onClick()}),this.node.on("touchcancel",function(i){"Buy"!==n.sceneType&&(t?t.active=!1:n.node.setScale(e))}),"Buy"===this.sceneType&&this.initBuy()},initBuy:function(){var t=this;this.node.add=function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];for(var o=e.length-1;o>=0;o--){var a=e[o];"number"==typeof a?t.coin=a:"string"==typeof a?t.toolName=a:"function"==typeof a&&(t.endCheckBuyFun=a)}t.initBuy1()},""===this.toolName||this.initBuy1()},initBuy1:function(){var t=this;this.dyl_noMoneyNode=this.node.getChildByName("noMoney");var n=this.node.getChildByName("coinNum");n&&(this.dyl_coinNumLab=n.getComponent(cc.Label),this.dyl_coinNumLab.string=String(this.coin)),this.dyl_hasBuyNode=this.node.getChildByName("hasBuy");var e=this.toolName.split(".");if(1===e.length){var o=e[0];"number"==typeof hjm[o]?(this.dyl_isCanBuy=function(){return!0},this.dyl_buy=function(){hjm[o]++,hjm[this.coinName]-=this.coin}):(this.dyl_isCanBuy=function(){return!hjm[o]},this.dyl_buy=function(){hjm[o]=!0,hjm[this.coinName]-=this.coin})}else{if(2!==e.length)return cc.error("\u53c2\u6570\u5e94\u8be5\u662fstr\u6216\u8005str.str",this.toolName);var a=i(e,2),r=a[0],c=a[1];if(Array.isArray(hjm[r]))this.dyl_isCanBuy=function(){return hjm[r].indexOf(c)<0},this.dyl_buy=function(){hjm[r].push(c),hjm[this.coinName]-=this.coin,hjm[r]=hjm[r]};else{var s=null,h=hjm[r];for(var l in h){s="number"!=typeof h[l];break}if(null===s)return cc.warn("DylButton",this.toolName,"\u8fd9\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u4e0d\u77e5\u9053\u5230\u5e95\u662f\u4e0d\u662f\u552f\u4e00\u7269\u54c1");s?(this.dyl_isCanBuy=function(){return!h[c]},this.dyl_buy=function(){h[c]=!0,hjm[this.coinName]-=this.coin}):(this.dyl_isCanBuy=function(){return!0},_hjmIsObjTabFun(r)?this.dyl_buy=function(){h[c]?h[c]++:h[c]=1,hjm[r]=hjm[r],hjm[this.coinName]-=this.coin}:this.dyl_buy=function(){h[c]?h[c]++:h[c]=1,hjm[this.coinName]-=this.coin})}}this.dyl_updateBuy&&_hjmDelArrFun(this.coinName,this.dyl_updateBuy),this.dyl_updateBuy=function(){t.dyl_isCanBuy()?dyl.set(t.dyl_hasBuyNode,"active",!1):dyl.set(t.dyl_hasBuyNode,"active",!0),hjm[t.coinName]<t.coin?dyl.set(t.dyl_noMoneyNode,"active",!0):dyl.set(t.dyl_noMoneyNode,"active",!1)},_hjmAddArrFun(this.coinName,this.dyl_updateBuy),this.dyl_updateBuy()},buy:function(){this.dyl_isCanBuy()&&hjm[this.coinName]>=this.coin&&(this.endCheckBuyFun?this.endCheckBuyFun()&&this.dyl_buy():this.dyl_buy())},onDestroy:function(){this.dyl_updateBuy&&_hjmDelArrFun(this.coinName,this.dyl_updateBuy)},clickFun:function(){""!==this.funName&&hjm[this.nodeName].getComponent(this.jsName)[this.funName]()},onClick:function(){var t=this;if(cc.loader.load(cc.url.raw("resources/dyl/button.mp3"),function(t,n){t&&cc.error(t),cc.audioEngine.play(n,!1,1)}),"NextScene"===this.sceneType)return this.clickFun(),cc.director.loadScene(this.nextScene);if("NextLevel"===this.sceneType){this.clickFun();var n=cc.director.getScene().name,e=n.replace(/[^0-9]/gi,""),i=n.split(e);if(1===i.length)return cc.error("\u8fd9\u4e2a\u5173\u5361\u547d\u540d\u6709\u95ee\u9898\uff0c\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u6570\u5b57");e=Number(e)+1;var o=i[0]+String(e)+i[1];return cc.director.loadScene(o)}if("ExitGame"===this.sceneType){if(this.clickFun(),cc.sys.isMobile)return cc.director.end();if(cc.sys.isBrowser)return window.opener=null,window.open("","_self"),void window.close();cc.sys.isNative}else{if("Restart"===this.sceneType)return this.clickFun(),void cc.director.loadScene(cc.director.getScene().name);"Popup"===this.sceneType?(this.clickFun(),this.popupNode.add()):"Popdown"===this.sceneType?this.popdownNode.del(function(){return t.clickFun()}):"Buy"===this.sceneType?this.buy():this.clickFun()}}}),cc._RF.pop()},{}],DylLab:[function(t,n,e){"use strict";cc._RF.push(n,"c1eaa+MGhdOJKV/CWWREtED","DylLab");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.Class({extends:cc.Component,editor:{menu:"dyl/\u32a3 \u6587\u5b57",inspector:"packages://dyl-nowshow/DylNotshow.js"},properties:{},__preload:function(){this.dylPreload()},dylPreload:function(){var t=this;this.node._hasDylLabInit||(this.node._hasDylLabInit=!0,this._data={},this.initLab(),this.node.say=function(n,e){var i=t._data[n];if(!i)return cc.error("\u6ca1\u6709\u8fd9\u79cdlabel\u7684\u8282\u70b9",n);for(var o=[],a=0;a<i.length;a++){var r=i[a].getComponent(cc.Label);r&&(r.string="",o.push(r))}if(0===o.length)return cc.warn("say\u6ca1\u6709label\u76f8\u5173\u7684\u8282\u70b9",n,e);t._data[n].value=e;for(var c=function(t){var n=++o[t]._dylSayId,i=e.length,a=0;dyl.update(function(r){if(n!==o[t]._dylSayId)return!1;var c=(a+=r)/.1+1>>0;return c>=i&&(c=i),lab.string=e.slice(0,c),c<i})},s=0;s<o.length;s++)c(s)})},addDataNode:function(t,n){this._data[t]?this._data[t].push(n):this._data[t]=[n]},setProgressBar:function(t){t._dylProgressBar=t.getComponent(cc.ProgressBar),t.set=function(t){if("number"==typeof t)return t>1&&(t=1),t<0&&(t=0),this._dylProgressBar.progress=t,t;cc.warn("progressBar \u7684data\u7c7b\u578b\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u6570\u5b57",t)};for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&this.addDataNode(i,t)}},setSameNode:function(t){for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&(this.addDataNode(i,t),this._data[i].value=t)}},setLabel:function(t){t._dylLabel=t.getComponent(cc.Label),t.set=function(t){if("string"==typeof t||"number"==typeof t){var n=String(t);this._dylLabel.string=n,this._dylLabel._dylSayId++}else cc.warn("label \u7684string \u7684data\u7c7b\u578b\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u6570\u5b57",t)},t.change=function(t,n){},t._dylLabel._dylSayId=0;for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&this.addDataNode(i,t)}},setDylNode:function(t){for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&this.addDataNode(i,t)}},setData:function(t,n){var e=this._data[t];Object.defineProperty(this.node,t,{get:function(){return void 0===e.value?cc.error("\u6ca1\u6709\u8fd9\u4e2a\u6570\u636e",t):e.value},set:function(t){if("boolean"!=typeof t)if(t&&"object"===(void 0===t?"undefined":i(t))&&"function"!=typeof t.getChildren&&void 0!==t.x&&void 0!==t.y){!0===t.x&&(t.x=e[0].x),!0===t.y&&(t.y=e[0].y);for(var n=t.sub(e[0]),o=0;o<e.length;o++){var a=e[o];a.setPosition(n.add(a))}}else if("cc.Color"!==cc.js.getClassName(t))if(cc.Action.prototype.isPrototypeOf(t))for(var r=0;r<e.length;r++){var c=e[r],s=t.clone();c.runAction(s)}else{if(Array.isArray(t)){var h=t;if(1===h.length)for(var l=h[0],u=0;u<e.length;u++){e[u].rotation=l}else if(2===h.length)for(var d=h[0],f=h[1],p=0;p<e.length;p++){e[p].setScale(d,f)}}else if("cc.Node"===cc.js.getClassName(t))return t.getComponent(cc.Sprite)?void(e.value.getComponent(cc.Sprite).spriteFrame=t.getComponent(cc.Sprite).spriteFrame):cc.error("\u5982\u679c\u63a5\u53d7\u8282\u70b9\uff0c\u90a3\u5c31\u4ee3\u8868\u590d\u5236\u8fd9\u4e2a\u8282\u70b9\u7684\u7eb9\u7406\uff0c\u4f46\u4f60\u8fdecc.Sprite\u7ec4\u4ef6\u90fd\u6ca1\u6709");if("function"!=typeof t){for(var y=e.value;;){for(var m=!1,v=0;v<e.length;v++){var g=e[v];if(g.set){var _=g.set(t);if(void 0!==_){t=_,m=!0;break}}}if(!m)break}e.value=t,void 0===y?y=t:"function"==typeof y.getChildren&&(y=t);for(var b=0;b<e.length;b++){var x=e[b];"function"==typeof x.change&&x.change(t,y)}"function"==typeof e.notify&&e.notify(t,y)}else e.notify=t}else for(var C=0;C<e.length;C++){e[C].color=t}else for(var D=0;D<e.length;D++){e[D].active=t}}}),void 0!==n&&(this.node[t]=n)},initLab:function(){for(var t=this.node.getChildren(),n=0;n<t.length;n++){var e=t[n];if("say"===e.name)return cc.error("say \u662fapi\u7684\u540d\u5b57\uff0c\u4e0d\u80fd\u7528");e.getComponent("DylBar")?this.setDylNode(e):e.getComponent(cc.Label)||e.getComponent(cc.ProgressBar)?e.getComponent(cc.ProgressBar)?this.setProgressBar(e):e.getComponent(cc.Label)?this.setLabel(e):cc.error("\u6211\u4e5f\u4e0d\u77e5\u9053\u6709\u4ec0\u4e48\u9519"):this.setSameNode(e)}for(var i in this._data)if(this.setData(i,this.node[i]),1===this._data[i].length){var o=this._data[i][0];o.getComponent(cc.Sprite)&&(o.dylSpriteNodeName=i)}}}),cc._RF.pop()},{}],DylList:[function(t,n,e){"use strict";cc._RF.push(n,"578a4sw++tE7JtsD2057jFj","DylList");var i=cc.Enum({up:0,down:1,left:2,right:3});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u5217\u8868"},properties:{dir:{default:i.up,type:i},d:8,startP:5,maxId:0,isTouch:!0},update:function(t){},__preload:function(){var t=this;if(this.maxId<0)return cc.error("\u6700\u5927\u6570\u91cf\u4e0d\u80fd\u4e3a\u8d1f\u6570");if(this.oriStartP=this.startP,this.isVertical=this.dir===i.up||this.dir===i.down,this.t=0,this.addFun=null,this.buttonFun=null,this.runFun=null,this.nodeArr=[],this.poolArr=[],this.nodeLen=0,this.startId=0,this.endId=0,this.len=this.isVertical?dyl.getSize(this.node).y:dyl.getSize(this.node).x,this.len<1)return cc.warn("DylList \u5f53\u524d\u8282\u70b9\u7684\u957f\u5ea6\u5c0f\u4e8e1",this.len);for(var n=this.node.getChildren(),e=0;e<n.length;e++){var o=this.isVertical?dyl.getSize(n[e]).y:dyl.getSize(n[e]).x;if(o<1)return cc.warn("DylList \u8fd9\u4e2a\u8282\u70b9\u7684\u957f\u5ea6\u5c0f\u4e8e1",n[e].name);this.poolArr.push(this.addPool(n[e],o)),this.poolArr[e].d=o,this.nodeLen+=o+this.d}this.minP=this.startP,this.getMaxP(),this.poolArr.add=function(t){var n=t%this.length;return n<0&&(n+=this.length),this[n].add()},this.add(this.startP),this.node.add=function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];if("number"!=typeof e[0]){t.addFun=null,t.buttonFun=null;for(var o=0;o<e.length;o++)"function"==typeof e[o]?t.addFun?t.buttonFun=e[o]:t.addFun=e[o]:"number"==typeof e[o]&&(t.maxId=e[o],t.getMaxP());return t.resetArr(t.startId,t.endId,0,0),t.resetPos({p:0,sId:0,eId:0}),t.add(t.oriStartP),t.nodeArr}return t.add(e[0]),t.nodeArr},this.isTouch?this.setTouch():this.setButton()},getMaxP:function(){if(this.maxId<=0)this.maxP=0;else{var t=this.poolArr.length,n=Math.floor(this.maxId/t),e=n*this.nodeLen;n=this.maxId-n*t;for(var i=0;i<n;i++)e+=this.poolArr[i].d+this.d;e=(e-=this.oriStartP)-this.d-this.len,this.maxP=e}},setTouch:function(){var t=this,n=!1,e=0,o=0,a=0;this.node.on("touchstart",function(i){var r=i.getLocation();t.runFun&&(t.runFun(),t.runFun=null),n=!1,e=t.isVertical?r.y:r.x,o=e,a=e}),this.node.on("touchmove",function(e){var r=e.getLocation();n=!0,o=a,a=t.isVertical?r.y:r.x,t.dir===i.right||t.dir===i.up?t.add(o-a+t.startP):t.add(a-o+t.startP)});var r=function(t,n){return(t=n.convertToNodeSpace(t)).x>=0&&t.x<=n.width&&t.y>=0&&t.y<=n.height},c=function(e){var c=e.getLocation();if(n)t.startP<=t.minP||t.startP>=t.maxP?t.checkOut():o+4<a?t.dir===i.down||t.dir===i.left?t.quickMove(1):t.quickMove(-1):a+4<o?t.dir===i.down||t.dir===i.left?t.quickMove(-1):t.quickMove(1):t.checkOut();else if(t.buttonFun)for(var s=t.nodeArr.length-1;s>=0;s--)if(r(c,t.nodeArr[s])){var h=t.nodeArr[s];return void t.buttonFun(h.dylListId,h)}};this.node.on("touchend",c),this.node.on("touchcancel",c)},setButton:function(){var t=this;this.node.on("touchend",function(n){if(t.buttonFun)for(var e=n.getLocation(),i=t.nodeArr.length-1;i>=0;i--)if(t.nodeArr[i].getBoundingBoxToWorld().contains(e)){var o=t.nodeArr[i];return void t.buttonFun(o.dylListId,o)}})},quickMove:function(t){var n=this,e=-300*t,i=600*t,o=-16e3*t,a=this.startP,r=t>0?this.maxP:this.minP;this.runFun=dyl.update(function(c){return(i+=(a-r)*t>0?(e+=o*c)*c:e*c)*t<=0?(n.runFun=null,n.checkOut(),!1):(a+=i*c,n.add(a),!0)})},quickOut:function(t){var n=this,e=this.startP,i=0;if(null>this.maxP)this.maxP,this.maxP;else if(null<this.minP)this.minP,this.minP;this.runFun=dyl.update(function(o){var a=(i+=o)/time;return a>=1?(n.add(null),n.runFun=null,!1):(a=Math.sqrt(a),n.add(null*a*t+e),!0)})},checkOut:function(){var t=this;if(0!==this.maxId){var n=this.startP,e=null,i=0;if(this.startP<this.minP)e=this.minP;else if(this.minP>this.maxP)e=this.minP;else{if(!(this.startP>this.maxP))return;e=this.maxP}this.runFun=dyl.update(function(o){return i+=o,t.add((e-n)*i/.1+n),!(i>.1&&(t.add(e),t.runFun=null,1))})}},getStartData:function(t){var n=0,e=0,i=0,o=Math.floor(t/this.nodeLen);t=t-o*this.nodeLen,o*=this.poolArr.length;var a=0;for(a=0;a<this.poolArr.length;a++){var r=this.poolArr[a];if(!(t>r.d))break;t-=r.d+this.d,o++}n=t,e=o,t=this.poolArr[a%this.poolArr.length].d-t;for(var c=this.poolArr.length,s=this.len-this.d;t<=s;)a=(a+1)%c,t+=this.poolArr[a].d+this.d,o++;if(i=o+1,this.maxId){i>this.maxId&&(i=this.maxId);var h=this.poolArr.length;for(a=e;a<i&&a<0;a++){var l=a%h;l+=h,l%=h,n-=this.poolArr[l].d+this.d,e++}}return{p:n,sId:e,eId:i}},add:function(t){cc.log("x",t),this.startP=t;var n=this.getStartData(t);this.resetArr(this.startId,this.endId,n.sId,n.eId),this.resetPos(n)},resetPos:function(t){for(var n=-t.p,e=0;e<this.nodeArr.length;e++){var o=this.nodeArr[e],a=.5*o.d+n;this.dir===i.up?o.y=a-.5*this.len:this.dir===i.down?o.y=.5*this.len-a:this.dir===i.right?o.x=a-.5*this.len:o.x=.5*this.len-a,n+=o.d+this.d}},resetArr:function(t,n,e,i){var o=this,a=this.nodeArr;this.nodeArr=[];var r=function(n,e){for(var i=n;i<e;i++)a[i-t].dylDel()},c=function(t,n){for(var e=t;e<n;e++){var i=o.poolArr.add(e);o.nodeArr.push(i),i.dylListId=e,o.addFun&&o.addFun(e,i)}};i<=t||n<=e?(r(t,n),c(e,i)):(r(t,e),r(i,n),c(e,t),function(n,e){for(var i=n;i<e;i++)o.nodeArr.push(a[i-t])}(Math.max(t,e),Math.min(n,i)),c(n,i));for(var s=this.poolArr.length-1;s>=0;s--)this.poolArr[s].dylReset();this.startId=e,this.endId=i},addPool:function(t,n){var e=[],i=[];e.push(t),t.dylDel=function(){e.push(this)},t.d=n,t.active=!0;var o={},a=this.node;return o.add=function(){if(e.length>0)return e.pop();if(i.length>0){var o=i.pop();return o.active=!0,o}var r=cc.instantiate(t);return r.active=!0,a.addChild(r),r.d=n,r.dylDel=function(){e.push(this)},r},o.dylReset=function(){for(var t=e.length-1;t>=0;t--)e[t].active=!1,i.push(e[t]);e.length=0},o}}),cc._RF.pop()},{}],DylMain:[function(t,n,e){"use strict";cc._RF.push(n,"16386x0i1VC7q9eDPwQmRQm","DylMain");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc.Enum({Null:0,SmallBig:1,Red:2,Shake:3});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2622 \u4e3b\u903b\u8f91",executeInEditMode:!0,inspector:"packages://dyl-main/DylMain.js"},properties:{touch:"",isPhysics:{default:!1,displayName:"\u7269\u7406"},isShowDebug:{default:!1,displayName:"\u8c03\u8bd5"},gravity:{default:cc.v2(0,-320),displayName:"\u91cd\u529b"}},_refresh:function(){},__preload:function(){this.myInit()},onEnable:function(){},initPhysics:function(){this.isPhysics&&(cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.isShowDebug?cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit:cc.director.getPhysicsManager().debugDrawFlags=0,cc.director.getPhysicsManager().gravity=this.gravity)},myInit:function(){this.initPhysics(),""!==this.touch&&this.setTouch()},onDestroy:function(){var t=this.__loadData;for(var n in t)cc.loader.releaseRes(n)},setTouch:function(){var t=this.node,n=null;t.button=t.button?t.button:[];var e=function(t,n){for(var e=0;e<n.length;e++){if(n[e].active)if(n[e].getBoundingBoxToWorld().contains(t))return n[e]}return null},a=this.node.touch,r=[];Object.defineProperty(this.node,"touch",{get:function(){return a},set:function(t){if(Array.isArray(t)){var n=function(t){return Array.isArray(t)?t:Array.from(t)}(t);a=n[0],r=n.slice(1)}else a=t,r=[];"string"!=typeof a&&cc.warn("touch\u7684\u72b6\u6001\u5e94\u8be5\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u91cc\u5374\u4e0d\u662f",void 0===a?"undefined":i(a),a)}}),this.node.touch||(this.node.touch="touch");var c=this.node.getComponent(this.touch),s=this.node.touch,h=function(n){var i=n.getLocation(),o=cc.v2(t.convertToNodeSpace(i)),a=t.getContentSize(),r=[a.width,a.height],c=r[0],s=r[1],h=[c/2,s/2];return c=h[0],s=h[1],o.subSelf(cc.v2(c,s)),o.in=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(i,n)},o},l=!0,u=function(t,n){if(n&&!0!==n&&!Array.isArray(n))return cc.warn("touch"+t+"return data \u4e0d\u662ftrue\uff0c\u4e0d\u662f\u5426\uff0c\u4e5f\u4e0d\u662f\u6570\u7ec4",a,n);Array.isArray(n)&&(r=n)},d=null,f=0,p=!1;this.node.on("touchstart",function(i){if(n=e(i.getLocation(),t.button))return c.buttonOn&&c.buttonOn(n),!0;if(!t.touch)return l=null,null;s=t.touch;var a=h(i);if(f++,d=a,p=!1,c[t.touch+"LongOn"]||c[t.touch+"LongUp"]||c[t.touch+"LongOut"]||c[t.touch+"LongEnd"]){var y=f;setTimeout(function(){if(y===f){if(s!==t.touch)return null;p=!0,l=!c[t.touch+"LongOn"]||c[t.touch+"LongOn"].apply(c,[d].concat(o(r))),u("on",l)}},500)}l=!c[t.touch+"On"]||c[t.touch+"On"].apply(c,[a].concat(o(r))),u("on",l)}),this.node.on("touchmove",function(e){if(n)return!0;if(!l)return null;if(s!==t.touch)return null;var i=h(e);d=i,l=!c[t.touch+"Move"]||c[t.touch+"Move"].apply(c,[i].concat(o(r))),u("move",l)},this),this.node.on("touchend",function(e){if(n)return c.buttonEnd?c.buttonEnd(n):c.buttonUp&&c.buttonUp(n),!0;if(f++,!l)return null;if(s!==t.touch)return null;var i=h(e);return c[t.touch+"LongEnd"]&&p?(l=c[t.touch+"LongEnd"].apply(c,[i].concat(o(r))),void u("longEnd",l)):c[t.touch+"LongUp"]&&p?(l=c[t.touch+"LongUp"].apply(c,[i].concat(o(r))),void u("longUp",l)):c[t.touch+"End"]?(l=c[t.touch+"End"].apply(c,[i].concat(o(r))),void u("end",l)):void(c[t.touch+"Up"]?(l=c[t.touch+"Up"].apply(c,[i].concat(o(r))),u("up",l)):l=!0)},this),this.node.on("touchcancel",function(e){if(n)return c.buttonEnd?c.buttonEnd(n):c.buttonOut&&c.buttonOut(n),!0;if(f++,!l)return null;if(s!==t.touch)return null;var i=h(e);return c[t.touch+"LongEnd"]&&p?(l=c[t.touch+"LongEnd"].apply(c,[i].concat(o(r))),void u("longEnd",l)):c[t.touch+"LongOut"]&&p?(l=c[t.touch+"LongOut"].apply(c,[i].concat(o(r))),void u("longOut",l)):c[t.touch+"End"]?(l=c[t.touch+"End"](i,l),void u("end",l)):void(c[t.touch+"Out"]?(l=c[t.touch+"Out"](i,l),u("out",l)):l=!0)},this)},setRun:function(){var t=this;this.node.run=function(){for(var n=function(){},e=arguments[0],i=function(t,n){return function(){var e=t;e.push(function(){return null});for(var i=e.length,a=0;a<e.length;a++)o(e[a],function(){--i<=0&&n()})()}},o=function(n,o){return"function"==typeof n?function(t,n){return function(){t(),n()}}(n,o):"number"==typeof n?function(t,n){return function(){var i=e;i.node&&(i=i.node);var o=cc.delayTime(t),a=cc.callFunc(n),r=cc.sequence(o,a);i.runAction(r)}}(n,o):"string"==typeof n?function(n,e){return function(){t.node.js[n](),e()}}(n,o):Array.isArray(n)?i(n,o):n.node?function(t,n){return function(){var e=t.node;e.node&&(e=e.node),t.add&&t.add>0?t.easing(cc.easeIn(t.add)):t.add&&t.add<0&&(cc.easeInOut(-t.add),t.easing(cc.easeInOut(-t.add)));var i=cc.callFunc(function(){n()}),o=cc.sequence(t,i);e.runAction(o)}}(n,o):function(t,n){return function(){var i=e;i.node&&(i=i.node),t.add&&t.add>0?t.easing(cc.easeIn(t.add)):t.add&&t.add<0&&(cc.easeInOut(-t.add),t.easing(cc.easeInOut(-t.add)));var o=cc.callFunc(n),a=cc.sequence(t,o);i.runAction(a)}}(n,o)},a=arguments.length-1;a>0;a--){var r=arguments[a];n=o(r,n)}n()}},setRand:function(){var t=this.rand;this.node.rand=function(n){var e=(t=(30853*t+253)%4671341)/4671341;return n?Math.floor(e*n):e},this.node.rand.set=function(n){t=n}}}),cc._RF.pop()},{}],DylPool:[function(t,n,e){"use strict";cc._RF.push(n,"34f084lYpFNQo1fsLe3Vr4s","DylPool");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2668 \u5bf9\u8c61\u6c60"},properties:{isEffect:!1},logPath:function(t){var n="";(function t(e){e&&(n=e.name+" "+n,t(e.parent))})(this.node),cc.log(n)},__preload:function(){for(var t=this.node._components,n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}this.preInit(),this.initPool()},preInit:function(){for(var t=[].concat(o(this.node.getChildren())),n=0;n<t.length;n++)t[n].parent=this.node.parent;var e=cc.v2(this.node);this.node.setPosition(cc.v2(0,0));var i=cc.instantiate(this.node);i.dylSpriteNodeName=i.name,i.name="tmp";for(var a=[].concat(o(this.node._components)),r=a.length-1;r>=0;r--)a[r].destroy();for(var c=0;c<t.length;c++)t[c].parent=i;i.setPosition(this.node),this.node.setPosition(e),i.parent=this.node},myPlay:function(t,n){for(var e=[t].concat(o(t.getChildren())),i=dyl.counter(function(){return t.del()},e.length),a=0;a<e.length;a++)this.playNode(e[a],n,i)},setColor:function(t,n){if(null!==n)for(var e=[t].concat(o(t.getChildren())),i=e.length-1;i>=0;i--)e[i].color=n},playNode:function(t,n,e){return t.getComponent(cc.ParticleSystem)?this.playParticleSystem(t,e):t.getComponent(cc.Animation)?this.playAnimation(t,e):t.getComponent(cc.Label)?this.playLabel(t,n,e):void e()},playAnimation:function(t,n){var e=t.getComponent(cc.Animation);e.on("finished",function t(){e.off("finished",t),n()}),e.play()},playLabel:function(t,n,e){t.getComponent(cc.Label).string=String(n);var i=Number(n);t.color=i<0?cc.color(255,10,10):i>0?cc.color(10,255,10):cc.color(255,255,255),t.setPosition(cc.v2(0,0)),t.opacity=255;tz(t)("1_pool")._moveBy(.5,cc.v2(0,200))._fadeTo(.5,0)(e)()},playParticleSystem:function(t,n){var e=t.getComponent(cc.ParticleSystem);e.resetSystem();var i=e.duration+e.life+e.lifeVar;tz("2_pool")(i)(n)()},resetDylNode:function(t,n){var e=t.getComponent(n);e&&e.__preload()},initPool:function(){var t=this.node.getChildren()[0];this.resetDylNode(t,"DylLab"),t.active=!1;var n=[],e=[];e.push(t),this.isEffect?t.del=function(){this.active=!1,e.push(this);var t=this.__poolId;n[t]=n[n.length-1],n[t].__poolId=t,n.length=n.length-1,this.__poolId=null}:t.del=function(){this.active=!1,e.push(this);var t=n.indexOf(this);if(-1===t)return cc.error("\u8fd9\u4e2a\u8282\u70b9\u5df2\u7ecf\u88ab\u5220\u9664\u4e86\uff0c\u4e0d\u80fd\u518d\u5220\u9664",this.name,t,n,this);n.splice(t,1),n[this.name]===this&&(n[this.name]=null)};var o=this;this.isEffect?this.node.add=function(){cc.log("isEffect");for(var t=null,a=null,r=null,c=arguments.length,s=Array(c),h=0;h<c;h++)s[h]=arguments[h];for(var l=s.length-1;l>=0;l--){var u=s[l],d=void 0===u?"undefined":i(u);"string"!==d&&"number"!==d?"cc.Vec2"!==(d=cc.js.getClassName(u))&&"cc.Node"!==d?"cc.Color"!==d||(r=u):t=u:a=u}var f=null;return e.length<1?((f=cc.instantiate(n[0])).parent=this,f.del=function(){this.active=!1,e.push(this);var t=this.__poolId;n[t]=n[n.length-1],n[t].__poolId=t,n.length=n.length-1,this.__poolId=null}):(f=e[e.length-1],e.length=e.length-1,f.active=!0),f.__poolId=n.length,n.push(f),null===t?cc.warn("\u4f4d\u7f6e\u6ca1\u6709\u8bbe\u7f6e"):(f.setPosition(t),o.setColor(f,r),o.myPlay(f,a),f)}:this.node.add=function(t){var i=null;return e.length<1?((i=cc.instantiate(n[0])).parent=this,i.del=function(){this.active=!1,e.push(this);var t=n.indexOf(this);if(-1===t)return cc.error("\u8fd9\u4e2a\u8282\u70b9\u5df2\u7ecf\u88ab\u5220\u9664\u4e86\uff0c\u4e0d\u80fd\u518d\u5220\u9664",this.name,t,n,this);n.splice(t,1),n[this.name]===this&&(n[this.name]=null)}):(i=e[e.length-1],e.length=e.length-1,i.active=!0),n.push(i),void 0!==t&&(i.name=t,n[t]=i),i},this.node.pool=n}}),cc._RF.pop()},{}],DylTileMap:[function(t,n,e){"use strict";cc._RF.push(n,"7b877KCI9xM9Iv8hDcLvFg0","DylTileMap"),cc.Class({extends:cc.Component,editor:{menu:"dyl/\u25a6 \u74e6\u5757\u5730\u56fe",inspector:"packages://dyl-nowshow/DylNotshow.js"},properties:{},__preload:function(){this.initTileMap()},initTileMap:function(){var t=this.node.getComponent(cc.TiledMap),n=t.getMapSize(),e=t.getTileSize().width;this.node.map=dyl.addMap(n.width,n.height),this.node.posMap=dyl.addMapLayer(n.width,n.height,e),this.node.add=function(i,o){var a=node.getChildByName(i).getComponent(cc.TiledLayer);if(a){for(var r=a.getLayerSize(),c=a.getMapTileSize().width,s=r.width-1;s>=0;s--)for(var h=r.height-1;h>=0;h--){var l=a.getTileGIDAt(s,r.height-h-1);o(cc.v2(s,h),l)}return map.d=c,map}for(var u=(a=t.getObjectGroup(i)).getObjects(),d=u.length-1;d>=0;d--){var f=u[d].x/e,p=u[d].y/e;o(cc.v2(f,n.height-p-1),u[d].name)}}}}),cc._RF.pop()},{}],DylWindow:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"f1099pPj+FP3oIXYJMx8XLx","DylWindow");var o=cc.Class({name:"NodeData",properties:{id:"",node:cc.Node,p:cc.v2(0,0),rotation:0,scaleX:1,scaleY:1,anchorX:.5,anchorY:.5,height:0,width:0,color:cc.color(255,255,255),opacity:255,skewX:0,skewY:0,active:!0,lab:""}}),a=cc.Class({name:"NodeDataArr",properties:{arr:[o]}});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2603 \u5f39\u7a97",executeInEditMode:!0,inspector:"packages://dyl-window/DylWindow.js"},ctor:function(){Object.defineProperty(this,"node",{get:function(){},set:function(t){delete this.node,this.node=t,this._myInit()},configurable:!0})},properties:{defaultData:{default:null,type:a},data:{default:[],type:a,visible:!1},showData:"default",_stateArr:{default:[],type:cc.String},stateArr:{default:[],type:cc.String}},_myInit:function(){var t=this;this.node.add=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return t.addFun(n,e)},this.node.del=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return t.delFun(n)}},getAction:function(t,n,e){if(!e.node.active)return[];var i=0,o=function(t){i=i>t?i:t},a=function(t,i){o(.4*Math.abs(e[t]-n[t])/i)};if(o(.4*e.p.sub(n.p).mag()/540),a("rotation",60),a("scaleX",.7),a("scaleY",.7),a("opacity",150),i<1e-4)return[];t.moveTo(e.node,i,e.p).rotateTo(e.node,i,e.rotation).scaleTo(e.node,i,e.scaleX,e.scaleY).fadeTo(e.node,i,e.opacity)},notActChange:function(t){for(var n=t.length-1;n>=0;n--){var e=t[n],i=e.node,o=e.anchorX,a=e.anchorY,r=e.height,c=e.width,s=e.color,h=e.skewX,l=e.skewY,u=e.active,d=e.lab;i.active=u,i.anchorX=o,i.anchorY=a,i.height=r,i.width=c,i.color=s,i.skewX=h,i.skewY=l,i.getComponent(cc.Label)&&(i.getComponent(cc.Label).string=d)}},addFun:function(t,n){if(t?this.showData=t:t=this.showData,"default"===t)return this._read("default");this._read("default");var e=this.data[this.stateArr.indexOf(t)].arr;this.notActChange(e);var i=tz();i._();for(var o=e.length-1;o>=0;o--)this.getAction(i,this.defaultData.arr[o],e[o]);i._()()},delFun:function(t){var n=this;if(this.node.active){if("default"===this.showData)return this.node.active=!1;var e=this.data[this.stateArr.indexOf(this.showData)].arr,i=tz();i._();for(var o=e.length-1;o>=0;o--)this.getAction(i,e[o],this.defaultData.arr[o]);i._()(function(){n.node.active=!1,t()})()}else t()},myAct:function(t){var n=this;if(t){this.node.active=!0;var e=this.node.scale,i=this.node.opacity,o=t>0?2:1,a=t>0?0:1,r=this.node;r.stopAllActions(),r.setScale(e*o),r.opacity=i*a;var c=cc.fadeTo(Math.abs(t),i*(1-a)),s=cc.scaleTo(Math.abs(t),e*(3-o)),h=cc.callFunc(function(){n.node.opacity=i,n.node.setScale(e),n.node.active=t>0}),l=cc.sequence(cc.spawn(c,s),h);r.runAction(l)}},_getString:function(t){return t.replace(/\s+/g,"")},_read:function(t){var n=null;if("default"===t)n=this.defaultData.arr;else for(var e=this.stateArr.length-1;e>=0;e--)this.stateArr[e]===t&&(n=this.data[e].arr);for(var i=n.length-1;i>=0;i--)if(n[i].node){var o=n[i].node,a=n[i];o.setPosition(a.p),o.rotation=a.rotation,o.scaleX=a.scaleX,o.scaleY=a.scaleY,o.anchorX=a.anchorX,o.anchorY=a.anchorY,o.color=a.color,o.opacity=a.opacity,o.skewX=a.skewX,o.skewY=a.skewY;var r=o.getComponent(cc.Label);if(r&&(r.string=a.lab),"Canvas"===o.name)this.node.getComponent(cc.Canvas).designResolution=cc.size(a.width,a.height);else o.height=a.height,o.width=a.width;o.active=a.active}},buttonSave:function(t){if("default"!==t)for(var n=this.stateArr.length-1;n>=0;n--)this.stateArr[n]===t&&(this.data[n]=this._getSaveData());else this.defaultData=this._getSaveData()},_save:function(t,n,e){if(this.stateArr[t]=n,"default"===n)return this.defaultData=this._getSaveData(),void(this.stateArr[t]="");this.data[t]=this._getSaveData(),""===n&&(this.stateArr[t]=e);for(var i=this.stateArr.length-1;i>=0;i--)if(this.stateArr[i]===this.stateArr[t]&&i!==t)return void(this.stateArr[t]="")},_getSaveData:function(){var t=new a;return t.arr=this._getSaveNodeArr(this.node),t},_getSaveNodeArr:function(t){for(var n=[this._addNodeData(t)],e=t.getChildren(),o=e.length-1;o>=0;o--)n.push.apply(n,i(this._getSaveNodeArr(e[o])));return n},_addNodeData:function(t){var n=new o;n.id=t.name,n.node=t,n.p=cc.v2(t),n.rotation=t.rotation,n.scaleX=t.scaleX,n.scaleY=t.scaleY,n.anchorX=t.anchorX,n.anchorY=t.anchorY,n.height=t.height,n.width=t.width,n.color=t.color,n.opacity=t.opacity,n.skewX=t.skewX,n.skewY=t.skewY,n.active=t.active;var e=t.getComponent(cc.Label);return e&&(n.lab=e.string),n},onLoad:function(){this.node.on("touchstart",function(){return null})}}),cc._RF.pop()},{}],DylWuli:[function(t,n,e){"use strict";cc._RF.push(n,"74127pcqJhKea7hsJnefXpC","DylWuli"),cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2604 \u7269\u7406",executeInEditMode:!0,inspector:"packages://dyl-nowshow/DylNotshow.js"},properties:{collisionFun:{default:function(){return new cc.Component.EventHandler},type:cc.Component.EventHandler}},__preload:function(){var t=this.node.getComponent(cc.RigidBody);Object.defineProperty(this.node,"v",{get:function(){return t.linearVelocity},set:function(n){t.linearVelocity=n}}),Object.defineProperty(this.node,"f",{get:function(){return t.linearDamping},set:function(n){t.linearDamping=n}}),Object.defineProperty(this.node,"a",{set:function(n){t.applyForceToCenter(n)}}),t.fixedRotation=!0,t.enabledContactListener=!0,""!==this.collisionFun.handler&&(this.collisionComponent=this.collisionFun.target.getComponent(this.collisionFun.component))},onEnable:function(){0},onBeginContact:function(t,n,e){this.collisionComponent&&(t.disabled=this.collisionComponent[this.collisionFun.handler](e.node))}}),cc._RF.pop()},{}],GameMain:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"8d46e23seZI9rvlxOKOILa7","GameMain"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.initVar(),this.initRole(),this.initBuff()},start:function(){this.node.touch="stand",this.showHero()},initBuff:function(){for(var t=hjm._buffLayer.getChildren(),n=0;n<t.length;n++){t[n].type="buff"}},endGame:function(t){this.ballStop(),hjm._endLab=[!0],t?(ai.isWin||(hjm.levelArr=[].concat(i(hjm.levelArr),[2]),ai.isWin=!0),hjm._endLab.str="\u80dc \u5229"):hjm._endLab.str="\u5931 \u8d25"},initRole:function(){var t=this,n=function(n,e){n.hp="0"+e.hp,n.oriData=e,n.resetData=function(){this.atk=this.oriData.atk,this.def=this.oriData.def,this.buff=this.oriData.buff},"en"===n.type&&(n.def=function(e,i){n.def<0&&(n.hp+=n.def,n.def=0,n.hp<=0&&(hjm._buffLayer[n.name]=!0,n.active=!1,0==--t._enNum&&t.endGame(!0)))});var i=dyl.update(),o=n.color;"en"===n.type||hjm._heroDataLab;n.hurtAct=function(t){var n=this,e=.2;this.en=t.mul(10/t.mag()),this.spr=cc.color(255,255,255);0;i(function(t){return(e-=t)>=0||(n.en=cc.v2(0,0),n.spr=o,!1)})},n.resetData(),e.showStr&&(n.showStr=e.showStr)};n(hjm._hero,{hp:20,atk:1,def:0,buff:[]}),hjm._hero.atk=function(t){hjm._heroDataLab.atk=t},hjm._hero.hp=function(t){hjm._heroDataLab.hp=t},hjm._hero.def=function(n){hjm._heroDataLab.def=n;var e=hjm._hero;e.def<0&&(e.hp+=e.def,e.def=0,e.hp<=0&&(cc.log(e.name,"\u5df2\u7ecf\u9635\u4ea1\u4e86"),t.endGame(!1)))};var e=hjm._enLayer.getChildren();e[0].name="en1",e[0].type="en",n(e[0],{hp:5,atk:1,def:5,showStr:"\u4e00\u4e2a\u6709\u62a4\u7532\u7684\u5c0f\u602a\u800c\u5df2",buff:[]});e[1].name="en2",e[1].type="en",n(e[1],{hp:20,atk:3,def:0,showStr:"\u653b\u51fb\u529b\u6bd4\u8f83\u9ad8\uff0c\u6709\u70b9\u4f24",buff:[]})},showRoleData:function(t,n){hjm._heroDataLab=[!1],hjm._enDataLab=[!1],hjm._buffDataLab=[!1],n.active=!0,n.hp=t.hp,n.atk=t.atk,n.def=t.def,n.showStr=t.showStr},showHero:function(){this.showRoleData(hjm._hero,hjm._heroDataLab)},showEn:function(t){this.showRoleData(t,hjm._enDataLab),hjm._enDataLab.en=t.en},showBuff:function(t){},initVar:function(){this._enNum=2},standOn:function(t){if(!t.in(hjm._skillButtonLayer))return hjm._moveLab=[!0],hjm._moveLab.arrow=!1,hjm._moveLab.spr1=t,hjm._moveLab.spr2=t,[t]},standMove:function(t,n){hjm._moveLab.spr2=t;var e=t.sub(n);return e.magSqr()<2?(hjm._moveLab.arrow=!1,[n]):(hjm._moveLab.arrow=!0,hjm._moveLab.arrow=cc.v2(hjm._hero),hjm._moveLab.arrow=[this.pToAngle(e.mul(-1))],[n,e])},standEnd:function(t,n,e){hjm._moveLab=[!1],e&&this.ballMove(e.mul(-1))},pToAngle:function(t){var n=t.x,e=t.y;if(-.001<=n&&n<=.001)return t.y>0?-90:90;if(-.001<=e&&e<=.001)return t.x>0?0:180;var i=e/n,o=180*Math.atan(i)/Math.PI;return n<0&&(o+=180),-o},ballMove:function(t){hjm._hero.back=!0;var n=t.mag();t=t.mul(1/n);this.moveData=hjm._hero.add(t.mul(2e3)),this.node.touch="move",this.showHero()},ballStop:function(){this.node.touch="stand";for(var t=[hjm._hero].concat(i(hjm._enLayer.getChildren())),n=0;n<t.length;n++)t[n].resetData();hjm._hero.back=!1,this.showHero()},moveOn:function(t){this.ballStop()},ballXBox:function(t,n,e,i){var o=cc.v2(i).sub(t);if(o.x*e.x+o.y*e.y<=0)return!1;e.y,e.x,e.x,t.y,t.x,e.y},onBeginContact:function(t){if(t){var n=t.type;if("en"===n){var e=hjm._hero,i=t;e.def-=i.atk,i.def-=e.atk,hjm._hpPool.add(cc.v2(i),-e.atk),hjm._hpPool.add(cc.v2(-480,-890),-i.atk)}else"buff"===n&&hjm._hero.atk++}},update:function(t){if("move"===this.node.touch){var n=this.moveData;n.t+=t;var e=hjm._hero;n.t>=n.maxT?(e.setPosition(n.maxT*n.v.x+n.ox,n.maxT*n.v.y+n.oy),this.onBeginContact(n.box),cc.log("..........."),cc.log(n.box),n.box&&(hjm._hurt.add(cc.v2(e).add(n.box).mul(.5)),cc.log(n.box),cc.log(n.box.type),"en"===n.box.type&&(cc.log("eeeeeeeeeeee"),e.hurtAct(cc.v2(n.v.mul(-1))),n.box.hurtAct(cc.v2(n.v)))),this.moveData=hjm._hero.add(cc.v2(n.vx,n.vy),n.t-n.maxT)):e.setPosition(n.t*n.v.x+n.ox,n.t*n.v.y+n.oy);var i=this.pToAngle(this.moveData.v.mul(-1));e.tail=[i];var o=12*n.t;o>4&&(o=4),e.tail=[o,!0]}}}),cc._RF.pop()},{}],LevelScene:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"b5deenHs1lAzqaF6+xAWmLr","LevelScene"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){ai.isWin=!1},buttonAdd:function(){hjm._buttonTop=[cc.v2(hjm._buttonLayer.buttonAdd)],this.node.touch="add"},buttonSub:function(){hjm._buttonTop=[cc.v2(hjm._buttonLayer.buttonSub)],this.node.touch="sub"},buttonMove:function(){hjm._buttonTop=[cc.v2(hjm._buttonLayer.buttonMove)],this.node.touch="move"},buttonFlag:function(){hjm._buttonTop=[cc.v2(hjm._buttonLayer.buttonFlag)],this.node.touch="flag"},buttonPlay:function(){hjm._buttonTop=[cc.v2(hjm._buttonLayer.buttonPlay)],this.node.touch="play"},addOn:function(t){var n=hjm._yDotPool.add();t.x=Math.floor(t.x),t.y=Math.floor(t.y),n.setPosition(t);var e=this.dataArr,i={node:n,type:0,pos:cc.v2(t),levelId:null};e.push(i)},getDataId:function(t){var n=[].concat(i(this.dataArr));dyl.arr(n,function(t,n){if(n.pos)return[n.node]});var e=t.in.apply(t,i(n));return e?dyl.get(n,e):null},subOn:function(t){var n=this.getDataId(t);null!==n&&(this.dataArr[n].node.del(),dyl.set(this.dataArr,n,1))},flagOn:function(t){var n=this.getDataId(t);if(null!==n){var e=this.dataArr[n];if(0===e.type){cc.log("\u53d8\u7ea2");var i=hjm._rDotPool.add();e.node.del(),e.node=i,i.setPosition(e.pos),e.type=1}else{cc.log("\u53d8\u9ec4");var o=hjm._yDotPool.add();e.node.del(),e.node=o,o.setPosition(e.pos),e.type=0}}},moveOn:function(t){var n=this.getDataId(t);if(null!==n)return[this.dataArr[n]]},moveMove:function(t,n){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),n.node.setPosition(t),n.pos=t,[n]},playOn:function(t){var n=this.getDataId(t);null!==n&&(null!==this.dataArr[n].levelId&&cc.director.loadScene("play"))},start:function(){this.dataArr=[],this.initData([0,-179,321,0,-190,380,1,-146,-350,0,-104,-347,0,-78,-338,1,-42,-321,0,6,-291,0,22,-249,0,-30,-214,0,-65,-170,1,-53,-142,0,13,-95,0,13,-11,1,-67,50,0,-96,83,0,-96,133,0,-91,139,0,-45,176,0,-12,202,1,26,228,0,-186,325]),this.initLevel(),this.node.touch="play",dyl.button(this,hjm._buttonLayer),cc.hh=this},initLevel:function(){for(var t=hjm.levelArr,n=0,e=0;e<t.length;e++){var i=t[e];if(!i)break;for(var o=n;o<this.dataArr.length;o++){var a=this.dataArr[o];if(1===a.type){n=o+1,a.node.num=i,a.levelId=e;break}}}for(var r=n;r<this.dataArr.length;r++){var c=this.dataArr[r];if(1===c.type){c.node.num=0,c.levelId=0;break}}},initData:function(t){for(var n=0;n<t.length;n+=3){var e={};e.type=t[n];var i=t[n+1],o=t[n+2],a=cc.v2(i,o);if(e.pos=a,e.levelId=null,0===e.type){var r=hjm._yDotPool.add();r.setPosition(a),e.node=r}else{var c=hjm._rDotPool.add();c.setPosition(a),e.node=c}this.dataArr.push(e)}},showData:function(){for(var t=[],n=0;n<this.dataArr.length;n++){var e=this.dataArr[n];t.push(e.type,e.pos.x,e.pos.y)}cc.log("["+String(t)+"]")}}),cc._RF.pop()},{}],MoreBullet:[function(t,n,e){"use strict";cc._RF.push(n,"0835fNXQb1Hh7PKDzOmSRpy","MoreBullet"),cc.Class({extends:cc.Component,properties:{},update:function(t){if(this.node.isShooting){var n=this.rigidbody.linearVelocity,e=Math.sqrt(n.x*n.x+n.y*n.y);if(e<=120&&(this.node.del(),this.node.isShooting=!1,hjm._main.getComponent("NewGameMain").endRun()),this.rigidbody.linearDamping<0&&e>=this.node.data.power_limit){var i=this.node.data.power_limit;this.rigidbody.linearVelocity=cc.v2(n.x*i/e,n.y*i/e),this.rigidbody.linearDamping=0}}},onEndContact:function(t,n,e){this.node.contactFun(n,e)},onLoad:function(){var t=this;this.rigidbody=this.node.getComponent(cc.RigidBody),this.atk=1,this.node.skill=function(){return t.skill()}},onBeginContact:function(t,n,e){this.node.isShooting},getUnit:function(t){var n=Math.sqrt(t.x*t.x+t.y*t.y);return cc.v2(t.x/n,t.y/n)},onCollisionEnter:function(t,n){this.node.isShooting},skill:function(){var t=hjm._bulletPool.smallBullet;hjm._main.getComponent("NewGameMain").runPool=t;for(var n=0;n<5;n++){var e=2*Math.PI*n/5,i=cc.v2(Math.cos(e),Math.sin(e)).mul(1200),o=t.add();o.data=this.node.data,o.contactFun=this.node.contactFun,o.setPosition(this.node),o.getComponent(cc.RigidBody).linearVelocity=i,o.isShooting=!0}this.node.del(),hjm._main.getComponent("NewGameMain").endRun()}}),cc._RF.pop()},{}],NewGameMain:[function(t,n,e){"use strict";cc._RF.push(n,"400efNX2xtCDJGyfc6l+Z7K","NewGameMain"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.minPlayerX=290,this.r=200,this.maxBulletX=310,this.maxBulletY=-400,this.runPool=hjm._bulletPool,this.initWuqiData(),this.chooseBullet(hjm._bulletButtonLayer.stone)},initWuqiData:function(){for(var t=function(t,n){var e=this.data,i=this.getComponent(cc.RigidBody),o=null,a=n.node.group;if("wall"===a?o=e.elec_c:"en"===a?o=e.hit_range_c:"buff"===a&&(o=e.BUFF_id),null===o)return cc.error("\u9047\u5230\u672a\u77e5\u7684\u78b0\u649e\u7c7b\u578b");var r=this.data.power_limit,c=i.linearVelocity,s=Math.sqrt(c.x*c.x+c.y*c.y);s>=r&&(i.linearVelocity=cc.v2(c.x*r/s,c.y*r/s),o<0&&(o=0)),i.linearDamping=o},n=hjm._bulletPool.getChildren(),e=0;e<n.length;e++){var i=n[e],o=i.name;i.data=dyl.data("wuqi."+o),i.contactFun=t}},chooseBullet:function(t){var n=t.name;hjm._buttonBg.setPosition(t),this.runPool=hjm._bulletPool[n]},touchOn:function(t){var n=t.in.apply(t,function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(hjm._bulletButtonLayer.getChildren()));if(!n){var e=t.x;e<-this.bulletOriMinX?e=-this.bulletOriMinX:e>this.bulletOriMinX&&(e=this.bulletOriMinX);var i=this.runPool.add();return i.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),i.setPosition(e,hjm._player.y+this.r),[cc.v2(t),i]}this.chooseBullet(n)},touchMove:function(t,n,e){var i=t.sub(hjm._player);i.mag();var o=i.x,a=i.y;hjm._player.rotation=this.pToAngle(i)-90;var r=Math.sqrt(this.r*this.r/(o*o+a*a)),c=-o*r,s=-a*r;return o=c+hjm._player.x,a=s+hjm._player.y,s<0||(o<-this.maxBulletX?(c=(o=-this.maxBulletX)-hjm._player.x,a=(s=Math.sqrt(this.r*this.r-c*c))+hjm._player.y):o>this.maxBulletX?(c=(o=this.maxBulletX)-hjm._player.x,a=(s=Math.sqrt(this.r*this.r-c*c))+hjm._player.y):a<this.maxBulletY&&(s=(a=this.maxBulletY)-hjm._player.y,o=(c=c<0?-Math.sqrt(this.r*this.r-s*s):Math.sqrt(this.r*this.r-s*s))+hjm._player.x),e.setPosition(cc.v2(o,a)),[n,e,cc.v2(c,s)])},touchEnd:function(t,n,e,i){i=this.touchMove(t,n,e)[2],t.sub(hjm._player).mag()<7||!i?e.del():(this.node.touch="shoot",this.bullet=e,this.shoot(e,i))},shootOn:function(){this.node.touch="stop",this.bullet.skill()},endRun:function(){this.runPool.pool.length||(this.node.touch="touch")},shoot:function(t,n){t.isShooting=!0,t.data=this.runPool.data,t.contactFun=this.runPool.contactFun,t.getComponent(cc.RigidBody).linearVelocity=n.mul(t.data.shot_speed_c)},pToAngle:function(t){var n=t.x,e=t.y;if(-.001<=n&&n<=.001)return t.y>0?-90:90;if(-.001<=e&&e<=.001)return t.x>0?0:180;var i=e/n,o=180*Math.atan(i)/Math.PI;return n<0&&(o+=180),-o}}),cc._RF.pop()},{}],StartScene:[function(t,n,e){"use strict";cc._RF.push(n,"c7281voIRBJU4VfSUNPDU4F","StartScene"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.t=0},update:function(t){this.t+=t,hjm._top.add(10*this.t);var n=10*this.t;n-=20*Math.floor(n/20),hjm._logo.y=130+Math.abs(n-10)}}),cc._RF.pop()},{}],Stone:[function(t,n,e){"use strict";cc._RF.push(n,"d4a356ZScdOKpAzpzifG6Ta","Stone"),cc.Class({extends:cc.Component,properties:{},update:function(t){if(this.node.isShooting){var n=this.rigidbody.linearVelocity,e=Math.sqrt(n.x*n.x+n.y*n.y);if(cc.log("v",n.x,n.y,e),e<=120&&(cc.warn("\u56e0\u4e3a\u901f\u5ea6\u592a\u5c11\u624d\u88ab\u6d88\u706d",n.x,n.y,e),this.node.del(),this.node.isShooting=!1,hjm._main.getComponent("NewGameMain").endRun()),this.rigidbody.linearDamping<0&&e>=this.node.data.power_limit){var i=this.node.data.power_limit;this.rigidbody.linearVelocity=cc.v2(n.x*i/e,n.y*i/e),this.rigidbody.linearDamping=0}}},onEndContact:function(t,n,e){this.node.isShooting&&(cc.log("onEndContact1",this.rigidbody.linearVelocity,this.rigidbody.linearDamping),this.node.contactFun(n,e),cc.log("onEndContact2",this.rigidbody.linearVelocity,this.rigidbody.linearDamping))},onLoad:function(){var t=this;this.rigidbody=this.node.getComponent(cc.RigidBody),this.atk=1,this.node.skill=function(){return t.skill()}},onEnable:function(){var t=this.node.getComponent(cc.PhysicsCircleCollider);t.friction=.2,t.restitution=.8},onBeginContact:function(t,n,e){this.node.isShooting&&cc.log("onBeginContact",this.rigidbody.linearVelocity)},onCollisionEnter:function(t,n){this.node.isShooting},skill:function(){var t=this.rigidbody.linearVelocity,n=t.x,e=t.y,i=Math.sqrt(n*n+e*e);this.rigidbody.linearVelocity=cc.v2(2e3*n/i,2e3*e/i),this.node.getComponent(cc.PhysicsCircleCollider).restitution=.3,this.atk=5}}),cc._RF.pop()},{}],Test:[function(t,n,e){"use strict";cc._RF.push(n,"22b97dhsuBEir93tFFz317G","Test"),cc.Class({extends:cc.Component,properties:{},start:function(){this.barLen=hjm._dataBarLab.bar.width,this.setButton(hjm._testButtonLayer.getChildByName("shot_speed_c"))},setButton:function(t){var n=t.name;hjm._testButtonTag.setPosition(t),this.setData(n)},touchOn:function(t){var n=t.in.apply(t,function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(hjm._testButtonLayer.getChildren()));if(!n)return t.in(hjm._dataBarLab.dot)?(cc.log("on",hjm._dataBarLab.dot.x,hjm._dataBarLab.dot.x-t.x,t.x),[hjm._dataBarLab.dot.x-t.x]):void 0;this.setButton(n)},touchMove:function(t,n){hjm._dataBarLab.dot.x=t.x+n,cc.log("move",hjm._dataBarLab.dot.x,n,t.x);var e=hjm._dataBarLab.dot.x/this.barLen,i=this.data,o=i.min,a=i.max,r=i.r,c=(i.name,((a-o)*e+o)/r);return this.setValue(c,!0),!0},setValue:function(t,n){var e=this.data,i=e.min,o=e.max,a=e.r,r=e.name,c=Math.floor(t*a);n||(hjm._dataBarLab.dot.x=this.barLen*(c-i)/(o-i)),hjm._dataBarLab.num=c,hjm._dataBarLab.min=i,hjm._dataBarLab.max=o,hjm._main.getComponent("NewGameMain").runPool.data[r]=t},setData:function(t){var n=hjm._main.getComponent("NewGameMain").runPool,e=this.getInitData(t);e.name=t,this.data=e,cc.log(t,n.data[t]),this.setValue(n.data[t])},getInitData:function(t){return"shot_speed_c"===t?{min:0,max:3e3,r:167,value:0}:"fly_speed_c"===t||"elec_c"===t||"hit_range_c"===t?{min:-10,max:10,r:-10,value:0}:"power_limit"===t?{min:0,max:3e3,r:1,value:0}:void 0}}),cc._RF.pop()},{}],Zxp:[function(t,n,e){"use strict";cc._RF.push(n,"6142dAbdApGX5eT/1TU7etj","Zxp"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},getCollisionData:function(t,n,e,i){this.minT=1e5,this.collisionData={ox:0,oy:0,vx:0,vy:0};for(var o=e.x,a=e.y,r=a,c=-o,s=o*t.y-t.x*a,h=t.x,l=t.y,u=i.length-1;u>=0;u--){var d=i[u],f=d.x,p=d.y,y=d.w,m=d.h;if(!((f-t.x)*o+(p-t.y)*a<=0)){var v=0,g=0;if(o<-1e-4){if(this.checkXLine(f+y,p-m,p+m,r,c,s,h-n,l,h,l,o,a,n))continue;v=1}else if(o>1e-4){if(this.checkXLine(f-y,p-m,p+m,r,c,s,h+n,l,h,l,o,a,n))continue;v=-1}if(a<-1e-4){if(this.checkYLine(p+m,f-m,f+m,r,c,s,h,l-n,h,l,o,a,n))continue;g=1}else if(a>1e-4){if(this.checkYLine(p-m,f-m,f+m,r,c,s,h,l+n,h,l,o,a,n))continue;g=-1}0===v?(this.checkDot(f-y,g*m+p,o,a,h,l,n),this.checkDot(f+y,g*m+p,o,a,h,l,n)):0===g?(this.checkDot(v*y+f,p-m,o,a,h,l,n),this.checkDot(v*y+f,p+m,o,a,h,l,n)):(this.checkDot(v*y+f,g*m+p,o,a,h,l,n),this.checkDot(-v*y+f,g*m+p,o,a,h,l,n),this.checkDot(v*y+f,-g*m+p,o,a,h,l,n))}}o>minNum?this.checkXLine(540,960,-810,r,c,s,h+n,l,h,l,o,a,n):o<-minNum&&this.checkXLine(-540,960,-810,r,c,s,h-n,l,h,l,o,a,n),a>minNum?this.checkYLine(960,-540,540,r,c,s,h,l+n,h,l,o,a,n):a<-minNum&&this.checkYLine(-810,-540,540,r,c,s,h,l-n,h,l,o,a,n)},checkDot:function(t,n,e,i,o,a,r){var c=o-t,s=a-n,h=e*e+i*i,l=2*(e*c+i*s),u=l*l-4*h*(c*c+s*s-r*r);if(u<0)return!1;var d=.5*(-l-u)/h;if(d>=this.minT)return!1;var f={ox:o+e*d,oy:a+i*d,vx:-e,vy:i};return this.collisionData=f,this.minT=d,!0},checkXLine:function(t,n,e,i,o,a,r,c,s,h,l,u,d){var f=i*(t-r)-o*c;if((f+o*n)*(f+o*e)<=0){var p=(t-r)/l;if(p>=this.minT)return!0;var y={ox:s+l*p,oy:h+u*p,vx:-l,vy:u};return this.collisionData=y,this.minT=p,!0}return!1},checkYLine:function(t,n,e,i,o,a,r,c,s,h,l,u,d){var f=o*(t-c)-i*r;if((f+i*n)*(f+i*e)<=0){var p=(t-c)/u;if(p>=this.minT)return!0;var y={ox:s+l*p,oy:h+u*p,vx:l,vy:-u};return this.collisionData=y,this.minT=p,!0}return!1}}),cc._RF.pop()},{}],ball:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"36092/sn3pKx6eAqy1a5l9t","ball"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this,n=.5*this.node.width,e=[].concat(i(hjm._enLayer.getChildren()),i(hjm._buffLayer.getChildren()));dyl.arr(e,function(t,n){n.w=.5*n.width,n.h=.5*n.height}),this.boxArr=e,this.node.add=function(i,o){return t.getCollisionData(cc.v2(t.node),n,i,e),t.collisionData.maxT=t.minT,t.collisionData.t=o||0,t.collisionData.v=i,t.collisionData}},onBeginContact:function(t,n,e){var i=e.type;if("en"===i){var o=hjm._hero,a=e;o.def-=a.atk,a.def-=o.atk,hjm._hpPool.add(cc.v2(a),-o.atk),hjm._hpPool.add(cc.v2(-480,-890),-a.atk)}else"buff"===i&&hjm._hero.atk++},getCollisionData:function(t,n,e,i){this.minT=1e5,this.collisionData={ox:0,oy:0,vx:0,vy:0,box:null};for(var o=e.x,a=e.y,r=a,c=-o,s=o*t.y-t.x*a,h=t.x,l=t.y,u=i.length-1;u>=0;u--)if(i[u].active){var d=i[u],f=d.x,p=d.y,y=d.w,m=d.h;if(!((f-t.x)*o+(p-t.y)*a<=0)){var v=0,g=0;if(o<-1e-4){if(this.checkXLine(f+y,p-m,p+m,r,c,s,h-n,l,h,l,o,a,n,i[u]))continue;v=1}else if(o>1e-4){if(this.checkXLine(f-y,p-m,p+m,r,c,s,h+n,l,h,l,o,a,n,i[u]))continue;v=-1}if(a<-1e-4){if(this.checkYLine(p+m,f-y,f+y,r,c,s,h,l-n,h,l,o,a,n,i[u]))continue;g=1}else if(a>1e-4){if(this.checkYLine(p-m,f-y,f+y,r,c,s,h,l+n,h,l,o,a,n,i[u]))continue;g=-1}0===v?(this.checkDot(f-y,g*m+p,o,a,h,l,n,i[u]),this.checkDot(f+y,g*m+p,o,a,h,l,n,i[u])):0===g?(this.checkDot(v*y+f,p-m,o,a,h,l,n,i[u]),this.checkDot(v*y+f,p+m,o,a,h,l,n,i[u])):(this.checkDot(v*y+f,g*m+p,o,a,h,l,n,i[u]),this.checkDot(-v*y+f,g*m+p,o,a,h,l,n,i[u]),this.checkDot(v*y+f,-g*m+p,o,a,h,l,n,i[u]))}}o>1e-4?this.checkXLine(540,960,-810,r,c,s,h+n,l,h,l,o,a,n,null):o<-1e-4&&this.checkXLine(-540,960,-810,r,c,s,h-n,l,h,l,o,a,n,null),a>1e-4?this.checkYLine(960,-540,540,r,c,s,h,l+n,h,l,o,a,n,null):a<-1e-4&&this.checkYLine(-810,-540,540,r,c,s,h,l-n,h,l,o,a,n,null)},checkDot:function(t,n,e,i,o,a,r,c){var s=o-t,h=a-n,l=e*e+i*i,u=2*(e*s+i*h),d=u*u-4*l*(s*s+h*h-r*r);if(d<=0)return!1;var f=.5*(-u-(d=Math.sqrt(d)))/l;if(f>=this.minT)return!1;var p=t-(o+e*f),y=n-(a+i*f),m=Math.sqrt(p*p+y*y),v=(p/=m)*e+(y/=m)*i,g={ox:o,oy:a,vx:e+(p=-2*p*v),vy:i+(y=-2*y*v),box:c};return this.collisionData=g,this.minT=f,!0},checkXLine:function(t,n,e,i,o,a,r,c,s,h,l,u,d,f){var p=i*(t-r)-o*c;if((p+o*n)*(p+o*e)<=0){var y=(t-r)/l;if(y>=this.minT)return!0;var m={ox:s,oy:h,vx:-l,vy:u,box:f};return this.collisionData=m,this.minT=y,!0}return!1},checkYLine:function(t,n,e,i,o,a,r,c,s,h,l,u,d,f){var p=o*(t-c)-i*r;if((p+i*n)*(p+i*e)<=0){var y=(t-c)/u;if(y>=this.minT)return!0;var m={ox:s,oy:h,vx:l,vy:-u,box:f};return this.collisionData=m,this.minT=y,!0}return!1}}),cc._RF.pop()},{}],en:[function(t,n,e){"use strict";cc._RF.push(n,"a1d40+UUN1IxI4t9E3/RhGz","en"),cc.Class({extends:cc.Component,properties:{},onBeginContact:function(t,n,e){cc.log("\u7269\u7406",n.node.name,e.node.name)},onCollisionEnter:function(t,n){cc.log("\u666e\u901a",n.node.name,t.node.name)}}),cc._RF.pop()},{}]},{},["DylAd","DylBar","DylButton","DylLab","DylList","DylMain","DylPool","DylTileMap","DylWindow","DylWuli","BackBullet","GameMain","LevelScene","MoreBullet","NewGameMain","StartScene","Stone","Test","Zxp","ball","en"]);